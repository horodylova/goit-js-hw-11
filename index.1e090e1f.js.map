{"mappings":"AAMA,MAEMA,EAAiBC,SAASC,cAAc,cAE9C,IAAIC,EAGGC,eAAeC,EAAcC,GACjC,IACG,MAAMC,QAAiBC,MAAMC,IATlB,2BASgC,CACzCC,OAAQ,CACNC,IAVO,qCAWPC,EAAGN,EACHO,WAAY,QACZC,YAAa,aACbC,WAAY,OACZC,SAAU,GACVC,KAAMC,eAIV,GAAwB,MAApBX,EAASY,OAAgB,CAE7B,MAAMC,EAAOb,EAASa,KAEK,IAArBA,EAAKC,KAAKC,OACZC,SAASC,OAAOC,QAAQ,4EAIxBC,eAAeN,EAAKC,MAGtB,MAAMM,EAAYP,EAAKO,UACjBC,EAAU,GAChBzB,EAAU0B,KAAKC,KAAKH,EAAYC,GAE3BV,aAAef,EACpBH,EAAe+B,MAAMC,QAAU,OAE/BhC,EAAe+B,MAAMC,QAAU,O,MAGjCC,QAAQC,MAAM,UAAW3B,EAASY,O,CAEpC,MAAOe,GACPD,QAAQC,MAAM,UAAWA,E,EAI7BlC,EAAemC,iBAAiB,SAAS,KACnCjB,YAAcf,EAChBiC,YAEApC,EAAe+B,MAAMC,QAAU,OAC/BT,SAASC,OAAOa,KAAK,8D,IC7DzB,IACIC,EADAC,EAAc,ECAlB,MAAMC,EAAcvC,SAASC,cAAc,sBACrCuC,EAAaxC,SAASC,cAAc,gBACnBD,SAASC,cAAc,YAQ9CuC,EAAWN,iBAAiB,UAAU,SAAUO,GAC5CA,EAAMC,iBACN,MAAMrC,EAAckC,EAAYI,MDOlCN,ECNiBhC,EACfD,EAAcC,GAEdkC,EAAYI,MAAQ,GDJtBL,EAAc,C","sources":["src/api.js","src/pagination.js","src/index.js"],"sourcesContent":["// import axios from 'axios';\n// import Notiflix from 'notiflix'; \n// import { displayResults } from './index';\n// import { nextPage, currentPage } from './pagination.js';\n\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst BASE_KEY = '40349433-607a0eca23d92c4a115fc3307';\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet maxPage;\n\n\nexport async function performSearch(searchQuery) {\n   try {\n      const response = await axios.get(BASE_URL, {\n        params: {\n          key: BASE_KEY,\n          q: searchQuery,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: 'true',\n          per_page: 40, \n          page: currentPage,\n        },\n      });\n  \n      if (response.status === 200) {\n      \n      const data = response.data;\n  \n        if (data.hits.length === 0) {\n          Notiflix.Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n        } \n        else {\n         \n          displayResults(data.hits);\n        }\n\n        const totalHits = data.totalHits;\n        const perPage = 40;\n        maxPage = Math.ceil(totalHits / perPage);\n\n         if (currentPage >= maxPage) {\n        loadMoreButton.style.display = 'none';\n      } else {\n        loadMoreButton.style.display = 'block';\n      }\n    } else {\n      console.error('Mistake', response.status);\n    }\n  } catch (error) {\n    console.error('Mistake', error);\n  }\n}\n\nloadMoreButton.addEventListener('click', () => {\n  if (currentPage < maxPage) {\n    nextPage();\n  } else {\n    loadMoreButton.style.display = 'none';\n    Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\");\n  }\n});\n\n  ","let currentPage = 1;\nlet searchQuery;  \nimport { performSearch } from './api';\n\n\n\nfunction nextPage() {\n  currentPage += 1;\n  performSearch(searchQuery, currentPage);\n}\n\nfunction resetPagination() {\n  currentPage = 1;\n}\n\nexport { nextPage, resetPagination, currentPage, searchQuery };\n\n \nexport function setSearchQuery(query) {\n  searchQuery = query;\n}","const searchInput = document.querySelector('.search-form input');\nconst searchForm = document.querySelector('.search-form');\nconst imageContainer = document.querySelector('.gallery');\n\nimport { resetPagination} from './pagination.js';\n\nimport { performSearch } from './api';\nimport { setSearchQuery } from './pagination';\n\n\nsearchForm.addEventListener('submit', function (event) {\n    event.preventDefault();  \n    const searchQuery = searchInput.value;\n    setSearchQuery(searchQuery); \n    performSearch(searchQuery);\n\n    searchInput.value = '';\n    resetPagination();\n  });\n\n  export function displayResults(results) {\n    imageContainer.innerHTML = ''; \n  \n    const photoCardsHTML = results.map((result) => {\n      return `\n        <div class=\"photo-card\">\n          <img src=\"${result.webformatURL}\" alt=\"${result.tags}\" loading=\"lazy\" />\n          <div class=\"info\">\n            <p class=\"info-item\"><b>Likes:</b> ${result.likes}</p>\n            <p class=\"info-item\"><b>Views:</b> ${result.views}</p>\n            <p class=\"info-item\"><b>Comments:</b> ${result.comments}</p>\n            <p class=\"info-item\"><b>Downloads:</b> ${result.downloads}</p>\n          </div>\n        </div>\n      `;\n    }).join('');\n  \n    imageContainer.innerHTML = photoCardsHTML;\n  }\n\n \n"],"names":["$2107b7db86dec8d6$var$loadMoreButton","document","querySelector","$2107b7db86dec8d6$var$maxPage","async","$2107b7db86dec8d6$export$6d5eb2b1056739cf","searchQuery","response","axios","get","params","key","q","image_type","orientation","safesearch","per_page","page","currentPage","status","data","hits","length","Notiflix","Notify","failure","displayResults","totalHits","perPage","Math","ceil","style","display","console","error","addEventListener","nextPage","info","$a593388852b485da$export$737148d43a127671","$a593388852b485da$export$385972cd6b54c3e1","$1f0dc3b9307be026$var$searchInput","$1f0dc3b9307be026$var$searchForm","event","preventDefault","value"],"version":3,"file":"index.1e090e1f.js.map"}